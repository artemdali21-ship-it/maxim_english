## БЭКЛОГ: Критическая ошибка CSS и потеря цветов в проекте

### СУТЬ ПРОБЛЕМЫ

**Дублирующаяся `@import url()` ошибка Tailwind v4:**
- При компиляции Tailwind v4 генерирует дублирующуюся `@import url('https://fonts.googleapis.com...')` на линии 5800 в конце скомпилированного CSS
- Эта @import находится ПОСЛЕ CSS правил (что невалидно), что блокирует весь парсинг CSS после этой строки
- ВСЕ стили после линии 5800 игнорируются браузером (включая цвета, параллакс, анимации)
- Это особенно видно в preview v0 - белый экран вместо контента

**Корневая причина:**
- Tailwind v4 автоматически генерирует эту @import из `:root` блока с CSS переменными в globals.css
- Это баг Tailwind v4, где он добавляет дублирующуюся @import при наличии CSS переменных

---

### ШАГИ ЧТО Я ДЕЛАЛ (Неправильно)

1. ❌ Добавил `.parallax-bg` класс в globals.css с `background-attachment` и `background-size`
2. ❌ Цвета исчезли, я подумал что это из-за `.parallax-bg` класса
3. ❌ Начал удалять код из globals.css (`:root`, `.dark`, `@layer base`)
4. ❌ Каждый раз добавлял новые стили, но дублирующаяся @import оставалась
5. ❌ Полностью переписал globals.css несколько раз
6. ❌ Переместил стили в layout.tsx через `<style>` тег
7. ❌ Восстановил globals.css, но не проверил что preview показывает белый экран

**ОШИБКА:** Я полагался на скриншоты живого сайта вместо того чтобы проверить preview v0. На деле я не знаю восстановился ли код или нет.

---

### СТРАТЕГИЯ УСТРАНЕНИЯ

**ПОДХОД 1 - Убрать дублирующуюся @import полностью (РЕКОМЕНДУЕТСЯ):**
1. ✅ Минимизировать globals.css - оставить ТОЛЬКО `@import 'tailwindcss'`
2. ✅ Все CSS переменные и стили переместить в layout.tsx через `<style>` тег в `<head>`
3. ✅ Это полностью обходит Tailwind v4 баг - @import генерируется только если есть CSS переменные в .css файле
4. ✅ Проверить что preview v0 показывает контент (не белый экран)

**ПОДХОД 2 - Использовать CSS модули вместо глобального CSS:**
1. Создать .module.css файлы для каждой секции
2. Импортировать стили локально, не глобально
3. Это позволит избежать глобальной дублирующейся @import

**ПОДХОД 3 - Downgrade на Tailwind v3:**
1. Если Tailwind v4 багует, вернуться на v3
2. v3 не имеет этой проблемы с дублирующейся @import

---

### ТЕКУЩИЙ СТАТУС

**ЧТО РАБОТАЕТ:**
- ✅ Живой сайт (v0-maxim-onufriev.vercel.app) - все цвета видны, параллакс работает
- ✅ Видео autoplay работает на мобильной версии

**ЧТО НЕ РАБОТАЕТ:**
- ❌ Preview внутри v0 - белый экран (нельзя проверить что я восстановил или нет)
- ❌ CSS парализован из-за дублирующейся @import на линии 5800

**НЕИЗВЕСТНО:**
- ❓ Восстановились ли цвета в globals.css реально или нет (нельзя проверить без деплоя)
- ❓ Работает ли параллакс на мобильной версии или нет

---

### ДЕЙСТВИЯ ДЛЯ ФИКСИНГА

1. **Очистить globals.css полностью** - оставить минимум, перенести всё в layout.tsx style тег
2. **Проверить preview v0** - должен показывать контент, не белый экран
3. **Если preview всё ещё белый** - искать другую проблему в components
4. **Только после этого** делать деплой и проверять на живом сайте

---

### ФАЙЛЫ КОТОРЫЕ ТРОГАЛИ

- `/app/globals.css` - много раз переписывали, дублирующаяся @import остаётся
- `/app/layout.tsx` - добавили `<style>` тег с CSS переменными и стилями
- `/components/sections/format-section.tsx` - добавили React hook для мобильного `background-size`
- `/components/sections/testimonials-section.tsx` - добавили React hook для мобильного `background-size` и карточки с фоном
- `/public/hero-video.mp4` - заменили на версию без звука для autoplay

---

### ВЫВОДЫ

1. ❌ Tailwind v4 имеет баг с дублирующейся @import при наличии CSS переменных в globals.css
2. ❌ Эта ошибка парализует весь CSS после линии 5800
3. ⚠️ Preview v0 не помогает отловить эту проблему (показывает белый экран, но неясно почему)
4. ✅ Решение: переместить ВСЕ стили в layout.tsx `<style>` тег, оставить globals.css пустым (только `@import 'tailwindcss'`)
